# Synology Deployment - Tubefy
services:
  tubefy:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: tubefy
    ports:
    - "49952:8080"
    networks:
    - tubefy-net
    environment:
    - JAVA_OPTS=-Djava.net.preferIPv4Stack=true -Dsun.net.inetaddr.ttl=3600 -Dnetworkaddress.cache.ttl=3600
    - YOUTUBE_API_KEY=${YOUTUBE_API_KEY}
    - YOUTUBE_CHANNEL_IDS=${YOUTUBE_CHANNEL_ID}
    - YOUTUBE_CHECK_INTERVAL=${YOUTUBE_CHECK_INTERVAL}
    - DISCORD_NOTIFICATION_MESSAGE=${DISCORD_NOTIFICATION_MESSAGE}
    - DISCORD_WEBHOOK_URLS=${DISCORD_WEBHOOK_URLS}
    - QUARKUS_PROFILE=prod
    restart: always
    logging:
      driver: "json-file"
      options:
        max-size: "16m"
        max-file: "10"

networks:
  tubefy-net:
    driver: bridge
    ipam:
      config:
      - subnet: 172.21.0.0/16